[tools]
node = { version = "lts", postinstall = "npm install"}
pnpm = { version = "10.24.0" }
rust = { version = "1.91.1", postinstall = "cargo install tauri-cli --version '^2.0.0' --locked" }

[tasks.setup]
description = "Setup the development environment"
run = [
    "pnpm install",
    "cd src-nuxt && pnpm install",
]

[tasks.dev]
description = "Run the Tauri development server"
run = "pnpm tauri dev"

[tasks.build]
description = "Run the Tauri development server"
run = "pnpm tauri build"

[tasks.test_all]
description = "Run all tests, checks, and clippy"
run = [
    "cd src-tauri && cargo test --workspace --verbose",
    "cd src-tauri && cargo check --workspace --all-targets", 
    "cd src-tauri && cargo clippy --workspace --all-targets -- -D warnings"
]

[tasks.clean_all]
description = "Clean all dev and build artifacts"
run = [
    "cd src-nuxt && pnpm nuxt cleanup",
    "cd src-nuxt && rm -Rf node_modules",
    "cd src-tauri && cargo clean"
]

[hooks]
enter = [
    "echo 'Entering Tauri/Nuxt development environment'",
]
